<div class="grid__item one-whole all-locations">


  <form class="form--locinator grid__item one-whole lap-and-up-one-half hard--left text--center">
    <input class="searchbox--locinator" id="searchTerm" type="text" data-ng-model="searchTerm"/>
    <label for="searchTerm">Ex. Jefferson Market, 10018, 455 Fifth Avenue</label>
    <button class="btn--small alpha" data-ng-click="submitAddress(searchTerm)">Find it!</button>

    <div class="filters">
	    <div class="filters__current">Search near <a class="btn btn--natural" href="" data-ng-click="useGeolocation()">your current location</a></div>
	    <div class="filters__research">Show me only <a class="btn btn--natural blueLight" href=""  data-ng-model="location.library_type" data-ng-true-value="research" data-ng-false-value="circulating">research libraries</a></div>
    </div>
    
  </form><!--

  --><div id="all-locations-map" class="grid__item one-whole lap-and-up-one-half"></div>
  <div id="all-locations-map-legend" class="hide-legend">
    <img src="http://maps.google.com/mapfiles/ms/icons/red-dot.png" />NYPL Library<br />
    <img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png" />Your Current Location
  </div>

  <section class="list">
 
    <div data-ng-if="searchError">No results for {{searchError}} within 25 miles of an NYPL Location.  Showing all branches.</div>
    <div class="alpha" data-ng-if="geolocationAddress">{{geolocationSearchText}} <a href="" data-ng-click="geolocationSearch()">{{geolocationAddress}}</a></div>


  	<section class="filters">
      <fieldset>
        <legend>Show me only:</legend>
        <ul class="filters__check check-list--inline">
          <li>
            <input id="research" type="checkbox" data-ng-model="location.library_type" data-ng-true-value="research" data-ng-false-value="circulating"/>
            <label for="research">Research Libraries</label>
          </li>
        </ul>
      </fieldset>
  	</section>
  	
    <br />

    <section class="results--heds grid one-whole push-half--left epsilon orangeDarkerText">
      <div class="h-card grid__item one-quarter" ng-click="predicate = 'name'; reverse=!reverse">Location</div><!--

      --><div class="h-card grid__item one-quarter" ng-click="predicate = 'distance'; reverse=!reverse">Distance</div><!--

      --><div class="h-card grid__item one-quarter">Hours</div><!--

    --><div class="h-card grid__item one-quarter">Services</div>
    </section>

    <!-- Locations are in h-card microformat -->
    <!-- http://microformats.org/wiki/h-card -->
    <section class="grid one-whole location push-half--left {{location._id}} {{location.highlight}}" data-ng-repeat="location in locations | filter:location.library_type | orderBy:predicate:reverse | limitTo: libraryLimit">

      <div class="results--location h-card grid__item one-half lap-and-up-one-quarter">
        <div class="p-org beta"><a href='/#/{{location.id|lowercase}}'>{{location.name}}</a></div>
        <div class="p-adr">
          <div class="p-street-address">{{location.street_address}}</div>
          <span class="p-locality">{{location.locality}}</span>, 
          <span class="p-region">{{location.region}}</span>, 
          <span class="p-postal-code">{{location.postal_code}}</span>
        </div>
        <div class="p-tel" data-ng-if="location.contacts.phone">Phone: {{location.contacts.phone}}</div>
        <div class="u-email" data-ng-if="location.contacts.email">Email: {{location.contacts.email}}</div>
      </div><!--

      --><div class="results--more grid__item one-half lap-and-up-three-quarters hard--left">
        
        <div class="results--distance h-card grid__item one-whole lap-and-up-one-third">
          <div data-ng-if="location.distance"><strong>{{location.distance}} miles</strong></div>
          <div><a class="icon-map" href="/#/{{location.id|lowercase}}/map">View on Map </a></div>
          <div><a class="icon-compass" href="https://maps.google.com/maps?saddr={{locationStart}}&daddr={{location.locationDest}}">Get Directions</a></div>
        </div><!--

        --><div class="results--hours h-card grid__item one-whole lap-and-up-one-third">
          <ul>
            <li data-ng-repeat='hours in location.hours.regular'>
              {{hours.day}} {{hours.open | timeFormat}} - {{hours.close | timeFormat}}
            </li>
          </ul>
        </div><!-- 

        --><div class="results--services h-card grid__item one-whole lap-and-up-one-third">
          <ul>
            <li data-ng-repeat="service in location._embedded.services | limitTo:3">
              {{service.name}}
            </li>
          </ul>
        </div>
      </div>

      <hr class="grid__item" data-ng-if='location.break' />

    </section> 
    <!-- End of ng-repeat -->
    <section class="grid one-whole">
      <div class="grid--center grid__item" data-ng-if="showMore"><a href="" class="btn" data-ng-click="viewMore()">Show {{increaseBy}}</a></div>
    </section>

  </section>
</div>
