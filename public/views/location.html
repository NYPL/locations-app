<!-- Individual Location -->
<div class="individual-location {{location.type}} h-card">

  <nyplbreadcrumbs></nyplbreadcrumbs>

  <!-- Location hours, address and image -->
  <div id="container__location_info">
    <h1 class="p-org">{{location.name}}</h1>
    <div class="grid">
      <div id="container__hours" class="grid__item lap-one-half one-whole desk-one-third">
        <div class="callout">
          <todayshours class="todays-hours" hours="{{hoursToday(location.hours) | hoursTodayFormat:'short'}}" />
          <div id="location-hours" class="location-hours">
            <h2 class="flush--ends hdg">{{ 'REGULAR_HOURS' | translate }} <span id="toggle-hours" ng-click="expand = !expand" ng-class="{'icon-arrow-down2': !expand, 'icon-arrow-up2': expand}"></span></h2>

            <div class="weekly-hours zeta" collapse="expand" duration="2500">
              <div class="{{hours.day}}" data-ng-repeat="hours in location.hours.regular" data-ng-if="$index != 7">
                <span class="day">{{hours.day}}</span>
                <span class="time">
                  {{ hours | timeFormat }}
                </span>
              </div>
            </div>
	          <p class="smallprint" data-ng-if="location.type == 'research'">
	            {{ 'IDV_DIVISION_HOURS' | translate }}
	          </p>
          </div>
        </div>
      </div><!--
        
      --><div id="container__address" class="grid__item one-whole lap-one-half desk-one-third">
          <!-- This is h-card microformat -->
          <!-- http://microformats.org/wiki/h-card -->
          <div class="p-adr">
            <div class="p-street-address">{{location.street_address}}</div>
            <span class="p-locality">{{location.locality}}</span>, 
            <span class="p-region">{{location.region}}</span>, 
            <span class="p-postal-code">{{location.postal_code}}</span>
            <div class="p-tel">{{location.contacts.phone}}</div>
            <div class="p-manager">{{ 'LIBRARY_MANAGER' | translate }}: {{location.contacts.manager}}</div>
          </div>
          
          <div class="wheelchair icon-accessibility icon-color-blue">{{ 'WHEELCHAIR' | translate }}</div>

          <div class="map-directions">
            <a class="icon-compass" data-ng-href="https://maps.google.com/maps?saddr={{locationStart}}&daddr={{locationDest}}">
              {{ 'DIRECTIONS' | translate }}
            </a>
          </div>

		      <a id="catalog-link" class="icon-books" data-ng-if="location._links.catalog_link"
            data-ng-href="{{ location._links.catalog_link.href }}">
            {{ 'SHELVES' | translate }}
          </a>

          <div class="social beta" data-ng-if="location.social_media">
            <a class="{{social.classes}}" data-ng-href="{{social.href}}" id="social_media"
              data-ng-repeat="social in location.social_media" class="inline"></a>
          </div>
          
        </div><!--

        --><div id="container__image" class="grid__item desk-one-third">
            <img class="img--outline" data-ng-src="{{location.image}}" alt="Picture of {{location.name}}">
        </div>
    </div>
  </div>

  <!-- Highlighted Services -->
  <div id="container__top_services">
    <div class="grid">
      <div class="grid__item one-whole">
        <div class="callout">
          <ul class="flush">
            <li class="title">{{ 'SERVICES_HEADER' | translate }}: </li>
            <li class="icon-book"><span>Lending</span></li>
            <li class="icon-box-add"><span>Book drop</span></li>
          </ul> 
          <a data-ng-href="/#/services/location/{{location.id}}" class="read-more">{{ 'ALL_SERVICES' | translate }}</a> 
        </div>
      </div>
    </div>
  </div>

  <!-- Divisions (API dependent) -->
  <div id="container__divisions" data-ng-if="location.type == 'research' && location._embedded.divisions">
    <h2 class="hdg">{{ 'DIVISION_HEADER' | translate }}</h2>
    <div class="grid">
      <div class="grid__item one-whole lap-and-up-one-half" data-ng-repeat='division in location._embedded.divisions'>
        <img class="img--left img--outline" data-ng-src="{{division.image}}" alt="" style="height: 100px;"/>
        <h4 class=""><a data-ng-href="/#/division/{{division.slug}}">{{division.name}}</a></h4>
        <p data-ng-if="division.hours">Hours Today: {{hoursToday(division.hours) | timeFormat}}</p>
      </div>
    </div>
  </div>

  <!-- Features -->
  <div id="container__features">
    <h2 class="hdg">{{ 'FEATURED' | translate }}</h2>
    <div class="grid">

      <div class="chunk one-whole lap-and-up-one-third" data-ng-repeat='feature in location._embedded.features'>
        <img class="one-whole img--left img--outline" data-ng-src="{{feature.image}}" 
          alt="Image of {{feature.title}}" style="height: 300px;">
        <h3 class=""><a data-ng-href="{{feature._links.web.href}}">{{feature.title}}</a></h3>
        <p class="desc">{{feature.description}}</p>
      </div>
    </div>
  </div>

  <!-- Events -->
  <div id="container__events" data-ng-if="location._embedded.events">
    <h2 class="hdg">{{ 'EVENTS' | translate }}</h2>
    <ul class="grid">
      <li class="chunk one-whole desk-one-third" data-ng-repeat="event in location._embedded.events">
        <h3 class="event__title"><a data-ng-href="http://nypl.org/{{event._links.self.href}}">{{event.title}}</a></h3>
        <p class="date">{{event.start | dateToISO | date:'EEEE, MMMM d, y, h:mma'}}</p>
        <p class="desc">{{event.body}}</p>

        <div class="">
          <aside class="event-buttons">
            <div data-ng-if="event.registration">
              {{ 'REGISTRATION' | translate }}:
              <event-registration how="{{event.registration}}" link="{{event._links.self.href}}">
              </event-registration>
            </div>

            <a data-ng-href="{{calendar_link('google', event, location)}}" target="_blank" rel="nofollow" class="icon-calendar google_link">
              Google
            </a>
            <a data-ng-href="{{calendar_link('yahoo', event, location)}}" target="_blank" rel="nofollow" class="icon-calendar yahoo_link">
              Yahoo
            </a>
            <a data-ng-href="" data-ng-click="ical_link(event, location.street_address)" target="_blank" download="nypl_event.ics" rel="nofollow" class="icon-calendar">
              iCal
            </a>
          </aside>
        </div>
      </li>
    </ul>   
      
    <div>
      <a class="read-more" data-ng-href="/#/{{location.slug}}/events">
        {{ 'MORE_EVENTS' | translate }}
      </a>
    </div>
  </div>

  <!-- About -->
  <div id="container__about">
    <h2 class="hdg">{{ 'ABOUT' | translate }}</h2>
    <div class="grid">
      <div class="grid__item one-whole lap-and-up-one-half">
        <div id="location-secondary-img">
          <img class="one-whole lap-and-up-one-whole img--outline"
            data-ng-src="{{location.image}}" alt="Picture of {{location.name}}">
        </div>
      </div><!--

      --><div id="about" class="grid__item one-whole lap-and-up-one-half">
        <p>{{location.about}}</p>
        <div><a class="read-more" data-ng-href="http://nypl.org/locations/{{location.slug}}">
          {{ 'ABOUT_MORE' | translate }}</a></div>
      </div>
    </div>
  </div>

  <!-- Blogs (conditonal) -->
  <div id="container__blogs" data-ng-if="location.type != 'research' && location._embedded.blogs">
    <h2 class="hdg">{{ 'BLOGS' |translate }}</h2>
    <div class="grid">
      <div class="chunk one-whole desk-one-third" data-ng-repeat='blog in location._embedded.blogs'>
        <h3><a data-ng-href="http://nypl.org/{{blog._links.self.href}}">{{blog.title}}</a></h3>
        <img data-ng-if="blog.image" class="img--left" data-ng-src="{{blog.image}}" alt="" style="height: 100px;" />
        <div class="teaser desc">{{blog.body | truncate}}</div>
      </div>
    </div>
  </div>

  <!-- Exhibitions (conditional) -->
  <div id="container__exhibitions_visit" data-ng-if="location.type == 'research'">
    <div class="grid">
      <div class="grid__item one-whole lap-and-up-one-half" data-ng-if="location._embedded.exhibitions">
        <div id="container__exhibitions">
          <h2 class="hdg">{{ 'EXHIBITION' | translate }}</h2>
          <div class="grid">
            <div class="chunk one-whole" data-ng-repeat='exhibition in location._embedded.exhibitions | limitTo:1'>
              <img data-ng-if="exhibition.image" class="img--left" data-ng-src="{{exhibition.image}}" alt="" style="height: 100px;" />
              <h3 class="exhibition__title"><a data-ng-href="http://nypl.org/{{exhibition._links.self.href}}">{{exhibition.title}}</a></h3>
              <p class="date">{{exhibition.start | dateToISO | date:'EEEE, MMMM d, y, h:mma'}}</p>
              <p class="teaser desc">{{exhibition.body | truncate}}</p>
            </div>
          </div>
        </div>
      </div><!--

      --><div class="grid__item one-whole lap-and-up-one-half">
        <div id="container__plan_visit" data-ng-if="location.type == 'research'">
          <h2 class="hdg">{{ 'PLAN_YOUR_VISIT' | translate }}</h2>
          <ul class="flush--left gamma">
            <li class="icon-screen">{{ 'RESERVE_COMPUTER' | translate }}</li>
            <li class="icon-library">{{ 'ILL' | translate }}</li>
            <li class="icon-users">{{ 'MEETING_ROOMS' | translate }}</li>
          </ul>

          <div>
            <a class="read-more" data-ng-href="/#/services/location/{{location.id}}">
              {{ 'ALL_SERVICES' | translate }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ask/Donate Directive -->

  <div class="ask-donate">
    <div class="appeal grid__item one-whole lap-and-up-one-half" id="donate">
      <p>Help us keep this library open 6 days a week!</p>
      <button class="btn--donate" class="{{donateHref}}">Donate now</button>
    </div><!--

 --><div class="askNYPL grid__item one-whole lap-and-up-one-half " id="ask-nypl">
      <ul>
        <li class="asknum icon-phone">917-ASK-NYPL</li>
        <li><librarianchatbutton /></li>
        <li><emailusbutton link="{{location._links.contact.href}}" /></li>
      </ul>
    </div>
  </div>



</div>
<!-- END Location Content -->
